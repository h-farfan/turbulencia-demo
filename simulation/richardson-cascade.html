<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Cascada de energ√≠a ‚Äì con remolinos animados, flechas y controles</title>
<style>
  :root{
    --blue:#7ec4e6;
    --brown:#8a6b3e;
    --violet:#6b57a1;
    --orange:#e5812a;
    --green:#5aa33a;
    --red:#cc2b1d;
    --ink:#18181b;
    --arrow:#2547cc;
    --radius:12px;
    .blue-dark { fill:#245b8a; } /* o el color que prefieras */
  }

  .blue-dark { fill:#245b8a; }  /* azul m√°s oscuro */
  
  html,body{height:100%;margin:0;background:#fff;color:var(--ink);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{max-width:1100px;margin:auto;padding:16px}
  svg{width:100%;height:auto;display:block;border:2px solid #000;border-radius:var(--radius)}

  /* Texto en SVG */
  .t-lg{ font: 700 28px/1.2 ui-sans-serif,system-ui; }
  .t-md{ font: 700 18px/1.2 ui-sans-serif,system-ui; }
  .t-sm{ font: 600 15px/1.2 ui-sans-serif,system-ui; }

  .green{ fill:var(--green); }
  .blue{ fill:var(--blue); }
  .red{ fill:var(--red); }

  .dashed{ stroke-dasharray:10 10; }

  rect.tag{ fill:rgba(128,128,128,0.4); stroke:#8ecaff; stroke-width:2; rx:10; ry:10; }

  /* Animaci√≥n de remolinos (rotaci√≥n continua) */
  .swirl{
    transform-box: fill-box;
    transform-origin: center;
    animation-name: spin;           /* <- rotaci√≥n continua */
    animation-timing-function: linear;
    animation-iteration-count: infinite;
    animation-duration: var(--d, 6s);
    animation-play-state: var(--play, running);
  }
  @keyframes spin{ from{ transform: rotate(0deg) } to{ transform: rotate(360deg) } }

  /* Respeta preferencias de reducci√≥n de movimiento */
  @media (prefers-reduced-motion: reduce){ .swirl{ animation:none } }

  /* Flecha contorneada grande (inyecci√≥n/disipaci√≥n) */
  .bigArrow{ stroke:var(--arrow); stroke-width:7; fill:none; stroke-linecap:round; stroke-linejoin:round; filter: drop-shadow(0 1px 0 rgba(0,0,0,.08)) }
  .bigArrowLabel{ fill:var(--arrow); font: 700 16px/1 ui-sans-serif,system-ui }

  /* Flechas internas */
  .cascadeArrow{ stroke:#5b4b8a }
  .subArrow{ stroke:#cf5682 }
  .fallArrow{ stroke:#a4752b }

  /* Barra de controles */
  .toolbar{
    display:flex; gap:12px; align-items:center; flex-wrap:wrap;
    border:1px solid #e6e6e7; border-radius:var(--radius); padding:10px 12px; margin-bottom:12px;
    background:linear-gradient(180deg,#fafafc,#f5f7ff);
  }
  .btn{ appearance:none; border:1px solid #d0d4ff; background:#eef2ff; color:#1f2a7a; font-weight:700; padding:8px 12px; border-radius:999px; cursor:pointer }
  .btn[aria-pressed="true"]{ background:#dfe6ff }
  .range{ display:flex; align-items:center; gap:8px }
  .range input{ width:200px }
  .hint{ font-size:12px; opacity:.7 }
</style>
</head>
<body>
<div class="wrap">
  <div class="toolbar" role="region" aria-label="Controles de animaci√≥n y exportaci√≥n">
    <button id="toggleBtn" class="btn" type="button" aria-pressed="false" aria-label="Pausar o reanudar">‚èØÔ∏è Pausa</button>
    <div class="range" role="group" aria-label="Velocidad de animaci√≥n">
      <label for="speed">Velocidad</label>
      <input id="speed" type="range" min="0.25" max="2" step="0.05" value="1" aria-valuemin="0.25" aria-valuemax="2" aria-valuenow="1">
      <span id="speedVal" class="hint">1√ó</span>
    </div>
    <button id="exportSvg" class="btn" type="button">‚¨áÔ∏è Exportar SVG</button>
    <button id="exportPng" class="btn" type="button">üñºÔ∏è Exportar PNG</button>
    <span class="hint" id="motionHint" aria-live="polite"></span>
  </div>

  <svg id="cascade" viewBox="0 0 1200 900" role="img" aria-labelledby="title desc">
    <title id="title">Cascada de energ√≠a turbulenta</title>
    <desc id="desc">Espirales animadas con flechas de inyecci√≥n y disipaci√≥n de energ√≠a. Incluye controles para pausar, ajustar velocidad y exportar.</desc>

    <!-- Marcadores de punta de flecha -->
    <defs>
      <!-- DEJA tu marker como est√° si quieres (orient="90") -->
      <marker id="arrowHead" viewBox="0 0 10 10"
        refX="0.1" refY="5"
        markerWidth="9" markerHeight="9"
        markerUnits="strokeWidth"
        orient="90">
        <path d="M0 0 L10 5 L0 10 Z" fill="context-stroke" stroke="none"/>
      </marker>
    </defs>

    <!-- Eje vertical -->
    <g>
      <line x1="60" y1="60" x2="60" y2="840" stroke="#000" stroke-width="4"/>
      <path d="M60 40 L50 70 L70 70 Z" fill="#000"/>
      <text x="40" y="450" writing-mode="vertical-rl" class="t-md">length scale (‚Ñì)</text>
    </g>

    <!-- L√≠neas/etiquetas superior e inferior -->
    <g>
      <line x1="80" y1="110" x2="1150" y2="110" class="dashed" stroke="var(--green)" stroke-width="4"/>
      <text x="600" y="90" text-anchor="middle" class="t-lg green">Integral Scale ‚Äì Energy Injection</text>
    </g>
    <g>
      <line x1="80" y1="800" x2="1150" y2="800" class="dashed" stroke="var(--red)" stroke-width="4"/>
      <text x="600" y="830" text-anchor="middle" class="t-lg red">Kolmogorov scale ‚Äì Energy dissipation</text>
    </g>

    
    <!-- Flechas grandes: INYECCI√ìN (arriba, hacia abajo) -->
    <!-- 
    <g transform="translate(150,60)">
      <path class="bigArrow" d="M -60 0 L 0 70 L 60 0 M -40 20 L 0 90 L 40 20"/>
      <text class="bigArrowLabel" x="0" y="110" text-anchor="middle">Injection</text>
    </g>
    <g transform="translate(1050,60)">
      <path class="bigArrow" d="M -60 0 L 0 70 L 60 0 M -40 20 L 0 90 L 40 20"/>
      <text class="bigArrowLabel" x="0" y="110" text-anchor="middle">Injection</text>
    </g>
    -->

    <!-- Flechas grandes: DISIPACI√ìN (abajo, hacia arriba) -->
    <!-- 
    <g transform="translate(150,840) rotate(180)">
      <path class="bigArrow" d="M -60 0 L 0 70 L 60 0 M -40 20 L 0 90 L 40 20"/>
      <text class="bigArrowLabel" x="0" y="-110" text-anchor="middle" transform="scale(-1,-1)">Dissipation</text>
    </g>
    <g transform="translate(1050,840) rotate(180)">
      <path class="bigArrow" d="M -60 0 L 0 70 L 60 0 M -40 20 L 0 90 L 40 20"/>
      <text class="bigArrowLabel" x="0" y="-110" text-anchor="middle" transform="scale(-1,-1)">Dissipation</text>
    </g>
    -->

    <!-- Tarjeta "Inertial range" -->
    <g transform="translate(520,130)" aria-label="Rango inercial ‚Äì Cascada de energ√≠a">
      <rect width="200" height="65"
      fill="rgba(128,128,128,0.4)" stroke="#8ecaff" stroke-width="2" rx="10" ry="10"/>
      <text x="100" y="25" text-anchor="middle" class="t-sm blue-dark">Inertial range ‚Äì</text>
      <text x="100" y="47" text-anchor="middle" class="t-sm blue-dark">Energy cascade</text>
    </g>

    <!-- Capas para remolinos -->
    <g id="layer-big" aria-hidden="true"></g>
    <g id="layer-mid" aria-hidden="true"></g>
    <g id="layer-small" aria-hidden="true"></g>
    <g id="layer-micro" aria-hidden="true"></g>

    <!-- Flechas internas entre escalas -->
    <!--
    <g class="cascadeArrow" stroke-width="6" fill="none" color="#5b4b8a" marker-end="url(#arrowHead)">
      <path d="M 360 260 C 360 290, 360 300, 360 320" />
      <path d="M 850 260 C 850 290, 850 300, 850 320" />
    </g>
    <g class="subArrow" stroke-width="5" fill="none" color="#cf5682" marker-end="url(#arrowHead)">
      <path d="M 240 430 C 240 455, 240 470, 240 495" />
      <path d="M 440 430 C 440 455, 440 470, 440 495" />
      <path d="M 640 430 C 640 455, 640 470, 640 495" />
      <path d="M 840 430 C 840 455, 840 470, 840 495" />
      <path d="M 1040 430 C 1040 455, 1040 470, 1040 495" />
    </g>
    <g class="fallArrow" stroke-width="5" fill="none" color="#a4752b" marker-end="url(#arrowHead)">
      <path d="M 200 610 C 200 650, 200 680, 200 710" />
      <path d="M 320 610 C 320 650, 320 680, 320 710" />
      <path d="M 440 610 C 440 650, 440 680, 440 710" />
      <path d="M 560 610 C 560 650, 560 680, 560 710" />
      <path d="M 680 610 C 680 650, 680 680, 680 710" />
      <path d="M 800 610 C 800 650, 800 680, 800 710" />
      <path d="M 920 610 C 920 650, 920 680, 920 710" />
      <path d="M 1040 610 C 1040 650, 1040 680, 1040 710" />
    </g>
    -->
    <g id="layer-arrows" aria-hidden="true"></g>
  </svg>
</div>

<script>
/**
 * Dibuja una espiral (Arqu√≠medes) y la envuelve en un <g> .swirl
 * para poder rotarla suavemente con CSS. Usa la custom prop --d
 * para que la barra de velocidad pueda ajustarla en caliente.
 */
function addSpiral(root, {cx, cy, turns=3, spacing=6, stroke="#000", width=4, duration=6, delay=0}) {
  const pts = [];
  const totalTheta = turns * Math.PI * 2;
  const step = 0.05;
  const a = 0;
  for (let t = 0; t <= totalTheta; t += step) {
    const r = a + spacing * t;
    const x = cx + r * Math.cos(t);
    const y = cy + r * Math.sin(t);
    pts.push([x, y]);
  }
  let d = "";
  pts.forEach((p, i) => d += (i ? "L" : "M") + p[0].toFixed(2) + " " + p[1].toFixed(2) + " ");
  const g = document.createElementNS("http://www.w3.org/2000/svg", "g");
  g.setAttribute("class", "swirl");
  g.style.setProperty('--d', duration + 's');
  g.style.animationDelay = delay + "s";
  const path = document.createElementNS("http://www.w3.org/2000/svg", "path");
  path.setAttribute("d", d.trim());
  path.setAttribute("fill", "none");
  path.setAttribute("stroke", stroke);
  path.setAttribute("stroke-width", width);
  path.setAttribute("stroke-linecap","round");
  path.setAttribute("stroke-linejoin","round");
  g.appendChild(path);
  root.appendChild(g);
  return g;
}

function getCss(v){ return getComputedStyle(document.documentElement).getPropertyValue(v).trim() }
const blue   = getCss('--blue');
const brown  = getCss('--brown');
const violet = getCss('--violet');
const orange = getCss('--orange');

/* ====== Par√°metros globales (1 sola fuente) ====== */
const bigCenters = [ {cx:400, cy:225}, {cx:800, cy:225} ];

const base = {            // nivel 0 (remolinos grandes)
  spacing: 5.5,             // <‚Äî CAMBIA AQU√ç y afecta remolinos y flechas
  turns:   3,
  width:   12
};

const factors = {         // reducci√≥n por nivel
  spacing: 0.7,
  turns:   0.9,
  width:   0.7
};

const gaps = {            // distancias verticales entre niveles (centro a centro)
  bigToMid:   220,
  midToSmall: 170,
  smallToMic: 150
};

/* === Config de flechas (una sola) === */
const arrow = {
  k: 0.75,          // grosor flecha = k * width del remolino del nivel
  startOffset: 8,  // separaci√≥n desde el borde INFERIOR de la espiral superior
  endOffset:   8,  // separaci√≥n desde el borde SUPERIOR de la espiral inferior

  // Escala de largo (0..1) por transici√≥n (1 = ocupa todo el canal √∫til)
  lengthScale: {
    L0toL1: 1.00,
    L1toL2: 0.90,
    L2toL3: 0.80
  },

  // Alineaci√≥n: -1 = pegada arriba, 0 = centrada, +1 = pegada abajo
  align: {
    L0toL1: 0,
    L1toL2: 0,
    L2toL3: 0
  },

  // Punta (marker)
  head: {
    scale: 1,          // tama√±o relativo de la punta
    useStrokeUnits: true // si true, escala con el stroke-width
  }
};
const MARKER_K = 3.5 * arrow.head.scale; // mismo ‚Äú3.5‚Äù que usabas antes

/* ===== Helpers compartidos ===== */
const level = (n)=>({     // n: 0=grande, 1=medio, 2=peque√±o, 3=micro
  spacing: base.spacing * Math.pow(factors.spacing, n),
  turns:   base.turns   * Math.pow(factors.turns,   n),
  width:   Math.max(1, base.width * Math.pow(factors.width, n))
});

function rMax(spacing, turns){ 
  // radio aprox. de la espiral de Arqu√≠medes
  return spacing * (turns * 2 * Math.PI); 
}

// Calcula y1,y2 dentro del ‚Äúcanal‚Äù entre el borde de arriba y abajo
function arrowSpan(yTopBound, yBottomBound, {startOffset, endOffset, lengthScale=1, align=0}){
  const top = yTopBound + startOffset;
  const bottom = yBottomBound - endOffset;
  const avail = Math.max(0, bottom - top);
  const len = Math.max(0, avail * lengthScale);
  const t = (align + 1) / 2; // -1..+1  ‚áí  0..1
  const y1 = top + (avail - len) * t;
  const y2 = y1 + len;
  return {y1, y2};
}

function addArrow(root, {x, y1, y2, stroke="#000", width=6}) {
  const yTop = Math.min(y1, y2);
  const yBottom = Math.max(y1, y2);

  const inset = 0.52 * width * MARKER_K;  // <- clave (0.45‚Äì0.60 seg√∫n gusto)
  const yBottomCut = yBottom - inset;

  const path = document.createElementNS("http://www.w3.org/2000/svg","path");
  path.setAttribute("d", `M ${x} ${yTop} L ${x} ${yBottomCut}`);
  path.setAttribute("fill","none");
  path.setAttribute("stroke", stroke);
  path.setAttribute("stroke-width", width);
  path.setAttribute("stroke-linecap","butt");
  path.setAttribute("marker-end","url(#arrowHead)");
  // path.style.color = stroke;
  root.appendChild(path);
}

// Ajusta el marker (punta) seg√∫n la config
(function tuneMarker(){
  const m = document.getElementById('arrowHead');
  if(!m) return;
  if (arrow.head.useStrokeUnits) m.setAttribute('markerUnits','strokeWidth');
  m.setAttribute('markerWidth',  MARKER_K);
  m.setAttribute('markerHeight', MARKER_K);
})();

/* --- Composici√≥n jer√°rquica (remolinos) --- */
const gBig   = document.getElementById("layer-big");
const gMid   = document.getElementById("layer-mid");
const gSmall = document.getElementById("layer-small");
const gMicro = document.getElementById("layer-micro");

bigCenters.forEach(({cx, cy})=>{
  // Nivel 0: grandes
  const L0 = level(0);
  addSpiral(gBig, {cx, cy, turns:L0.turns, spacing:L0.spacing, stroke:blue,   width:L0.width, duration:9});

  // Nivel 1: medianos (2 por grande)
  const L1 = level(1);
  const midY = cy + gaps.bigToMid;
  [-80, +80].forEach(dx=>{
    const midCx = cx + dx;
    addSpiral(gMid, {cx:midCx, cy:midY, turns:L1.turns, spacing:L1.spacing, stroke:brown, width:L1.width, duration:6});

    // Nivel 2: peque√±os (2 por mediano)
    const L2 = level(2);
    const smallY = midY + gaps.midToSmall;
    [-40, +40].forEach(dx2=>{
      const smallCx = midCx + dx2;
      addSpiral(gSmall, {cx:smallCx, cy:smallY, turns:L2.turns, spacing:L2.spacing, stroke:violet, width:L2.width, duration:5});

      // Nivel 3: micro (2 por peque√±o)
      const L3 = level(3);
      const microY = smallY + gaps.smallToMic;
      [-20, +20].forEach(dx3=>{
        addSpiral(gMicro, {cx:smallCx+dx3, cy:microY, turns:L3.turns, spacing:L3.spacing, stroke:orange, width:L3.width, duration:4});
      });
    });
  });
});

/* --- Flechas din√°micas (separado) --- */
const gArrows = document.getElementById("layer-arrows");

function drawArrows(){
  gArrows.innerHTML = ""; // limpia si se vuelve a dibujar

  bigCenters.forEach(({cx, cy})=>{
    const L0 = level(0), L1 = level(1), L2 = level(2), L3 = level(3);

    // ===== Grande ‚Üí Mediano =====
    {
      const yTopBound    = cy + rMax(L0.spacing, L0.turns);
      const yBottomBound = (cy + gaps.bigToMid) - rMax(L1.spacing, L1.turns);
      const span = arrowSpan(yTopBound, yBottomBound, {
        startOffset: arrow.startOffset,
        endOffset:   arrow.endOffset,
        lengthScale: arrow.lengthScale.L0toL1,
        align:       arrow.align.L0toL1
      });
      addArrow(gArrows, {
        x: cx,
        y1: span.y1,
        y2: span.y2,
        stroke: "#5b4b8a",
        width: L0.width * arrow.k
      });
    }

    // Medianos (2 por grande)
    const midY = cy + gaps.bigToMid;
    [-80, +80].forEach(dx=>{
      const midCx = cx + dx;

      // ===== Mediano ‚Üí Peque√±o =====
      {
        const yTopBound    = midY + rMax(L1.spacing, L1.turns);
        const yBottomBound = (midY + gaps.midToSmall) - rMax(L2.spacing, L2.turns);
        const span = arrowSpan(yTopBound, yBottomBound, {
          startOffset: arrow.startOffset,
          endOffset:   arrow.endOffset,
          lengthScale: arrow.lengthScale.L1toL2,
          align:       arrow.align.L1toL2
        });
        addArrow(gArrows, {
          x: midCx,
          y1: span.y1,
          y2: span.y2,
          stroke: "#cf5682",
          width: L1.width * arrow.k
        });
      }

      // Peque√±os (2 por mediano)
      const smallY = midY + gaps.midToSmall;
      [-40, +40].forEach(dx2=>{
        const smallCx = midCx + dx2;

        // ===== Peque√±o ‚Üí Micro =====
        {
          const yTopBound    = smallY + rMax(L2.spacing, L2.turns);
          const yBottomBound = (smallY + gaps.smallToMic) - rMax(L3.spacing, L3.turns);
          const span = arrowSpan(yTopBound, yBottomBound, {
            startOffset: arrow.startOffset,
            endOffset:   arrow.endOffset,
            lengthScale: arrow.lengthScale.L2toL3,
            align:       arrow.align.L2toL3
          });
          addArrow(gArrows, {
            x: smallCx,
            y1: span.y1,
            y2: span.y2,
            stroke: "#a4752b",
            width: L2.width * arrow.k
          });
        }
      });
    });
  });
}

drawArrows(); // dibuja una vez

/* ---- Controles ---- */
const toggleBtn = document.getElementById('toggleBtn');
const speed = document.getElementById('speed');
const speedVal = document.getElementById('speedVal');
const motionHint = document.getElementById('motionHint');

function setPlayState(running){
  document.documentElement.style.setProperty('--play', running ? 'running' : 'paused');
  toggleBtn.setAttribute('aria-pressed', String(!running));
  toggleBtn.textContent = running ? '‚èØÔ∏è Pausa' : '‚ñ∂Ô∏è Reanuda';
}

function setSpeed(mult){
  speedVal.textContent = mult.toFixed(2).replace(/\.00$/, '') + '√ó';
  document.querySelectorAll('.swirl').forEach(el=>{
    const base = parseFloat(getComputedStyle(el).getPropertyValue('--d')) || 6;
    el.style.setProperty('--d', (base / mult) + 's');
  });
}

toggleBtn.addEventListener('click', ()=>{
  const isPaused = getComputedStyle(document.documentElement).getPropertyValue('--play').trim() === 'paused';
  setPlayState(isPaused);
});

speed.addEventListener('input', (e)=> setSpeed(parseFloat(e.target.value)) );

// Mensaje si el usuario prefiere menos movimiento
const mq = matchMedia('(prefers-reduced-motion: reduce)');
function updateMotionHint(){
  motionHint.textContent = mq.matches ? 'Movimiento reducido activo por preferencia del sistema.' : '';
}
mq.addEventListener?.('change', updateMotionHint);
updateMotionHint();

/* ---- Exportaci√≥n ---- */
function serializeSvg(){
  const svg = document.getElementById('cascade');
  // Copia para asegurarnos de inlinear xmlns
  const clone = svg.cloneNode(true);
  clone.setAttribute('xmlns','http://www.w3.org/2000/svg');
  clone.setAttribute('xmlns:xlink','http://www.w3.org/1999/xlink');

  // Inyectamos estilos cr√≠ticos dentro del propio SVG
  const style = document.createElementNS('http://www.w3.org/2000/svg','style');
  style.textContent = `
    .t-lg{ font:700 28px/1.2 ui-sans-serif,system-ui }
    .t-md{ font:700 18px/1.2 ui-sans-serif,system-ui }
    .t-sm{ font:600 15px/1.2 ui-sans-serif,system-ui }
    .green{ fill:${getCss('--green')} }
    .blue{ fill:${getCss('--blue')} }
    .red{ fill:${getCss('--red')} }
    .dashed{ stroke-dasharray:10 10 }
    rect.tag{ fill:rgba(128,128,128,0.4); stroke:#8ecaff; stroke-width:2; rx:10; ry:10 }
    .bigArrow{ stroke:${getCss('--arrow')}; stroke-width:7; fill:none; stroke-linecap:round; stroke-linejoin:round }
    .bigArrowLabel{ fill:${getCss('--arrow')}; font:700 16px/1 ui-sans-serif,system-ui }
    .cascadeArrow{ stroke:#5b4b8a }
    .subArrow{ stroke:#cf5682 }
    .fallArrow{ stroke:#a4752b }
    .swirl{ transform-box:fill-box; transform-origin:center; animation: spin var(--d,6s) linear infinite }
    @keyframes spin{ from{ transform: rotate(0deg) } to{ transform: rotate(360deg) } }
  `;
  clone.insertBefore(style, clone.firstChild);
  return new XMLSerializer().serializeToString(clone);
}

function download(name, mime, data){
  const blob = new Blob([data], {type: mime});
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = name;
  document.body.appendChild(a);
  a.click();
  requestAnimationFrame(()=>{ URL.revokeObjectURL(a.href); a.remove() });
}

document.getElementById('exportSvg').addEventListener('click', ()=>{
  download('cascada-energia.svg','image/svg+xml;charset=utf-8', serializeSvg());
});

document.getElementById('exportPng').addEventListener('click', async ()=>{
  const str = serializeSvg();
  const url = URL.createObjectURL(new Blob([str], {type:'image/svg+xml;charset=utf-8'}));
  const img = new Image();
  img.decoding = 'async';
  img.onload = ()=>{
    const canvas = document.createElement('canvas');
    // Tama√±o base proporcional al viewBox
    canvas.width = 1600; // puedes ajustar
    canvas.height = 1200; // idem
    const ctx = canvas.getContext('2d');
    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
    canvas.toBlob(blob=>{
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'cascada-energia.png';
      document.body.appendChild(a); a.click();
      requestAnimationFrame(()=>{ URL.revokeObjectURL(a.href); a.remove() });
      URL.revokeObjectURL(url);
    }, 'image/png');
  };
  img.onerror = ()=>{ alert('No se pudo renderizar el PNG en este navegador.'); URL.revokeObjectURL(url) };
  img.src = url;
});
</script>
</body>
</html>
